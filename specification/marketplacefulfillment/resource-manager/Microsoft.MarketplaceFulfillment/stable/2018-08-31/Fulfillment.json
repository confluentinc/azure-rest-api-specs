{
  "swagger": "2.0",
  "info": {
    "title": "MarketplaceFulfillment",
    "description": "REST API for MarketplaceFulfillment.",
    "version": "2018-08-31"
  },
  "host": "marketplaceapi.microsoft.com",
  "basePath": "/api/saas/subscriptions",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "security": [
    {
      "azure_auth": [
        "user_impersonation"
      ]
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "flow": "implicit",
      "description": "Azure Active Directory OAuth2 Flow.",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    }
  },
  "paths": {
    "/resolve?api-version={api-version}": {
      "post": {
        "operationId": "MarketplaceFulfillment_Resolve",
        "description": "Resolve marketplace subscription.",
        "x-ms-examples": {
          "ResolveSubscription": {
            "$ref": "./examples/ResolveSubscription.json"
          }
        },
        "parameters": [
          {
            "name": "x-ms-requestid",
            "in": "header",
            "required": false,
            "type": "string",
            "description": "A unique string value for tracking the request from the client, preferably a GUID. If this value isn't provided, one will be generated and provided in the response headers."
          },
          {
            "name": "x-ms-correlationid",
            "in": "header",
            "required": false,
            "type": "string",
            "description": "A unique string value for operation on the client. This parameter correlates all events from client operation with events on the server side. If this value isn't provided, one will be generated and provided in the response headers."
          },
          {
            "name": "x-ms-marketplace-token",
            "in": "header",
            "required": true,
            "type": "string",
            "description": "The token query parameter in the URL when the user is redirected to the SaaS partnerâ€™s website from Azure (for example: https://contoso.com/signup?token=..). Note: The URL decodes the token value from the browser before using it."
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. The request was successfully processed and the terms were accepted.",
            "schema": {
              "$ref": "#/definitions/Subscription"
            }
          },
          "default": {
            "description": "Microsoft.MarketplaceFulfillment error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    }
  },
  "parameters": {
    "ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "required": true,
      "type": "string",
      "description": "The API version to use for the request."
    }
  },
  "definitions": {
    "Subscription": {
      "properties": {
        "properties": {
          "$ref": "#/definitions/SubscriptionProperties",
          "description": "Represents the properties of the resource.",
          "x-ms-client-flatten": true
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/SubscriptionProperties"
        }
      ],
      "description": "Subscription Publisher/Offer/Plan tuple with quantity"
    },
    "SubscriptionProperties": {
      "properties": {
        "id": {
          "type": "string",
          "description": "GUID."
        },
        "name": {
          "type": "string",
          "description": "Subscription name."
        },
        "publisherId": {
          "type": "string",
          "description": "Publisher Id."
        },
        "offerId": {
          "type": "string",
          "description": "Offer Id."
        },
        "planId": {
          "type": "string",
          "description": "Plan Id."
        },
        "quantity": {
          "type": "string",
          "format": "integer",
          "description": "Quantity."
        }
      },
      "description": "Subscription definition"
    },
    "ErrorResponse": {
      "description": "Error response indicates Microsoft.MarketplaceFulfillment service is not able to process the incoming request. The reason is provided in the error message.",
      "type": "object",
      "properties": {
        "error": {
          "description": "The details of the error.",
          "properties": {
            "code": {
              "description": "Error code.",
              "type": "string",
              "readOnly": true
            },
            "message": {
              "description": "Error message indicating why the operation failed.",
              "type": "string",
              "readOnly": true
            }
          }
        }
      }
    }
  }
}